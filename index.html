<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrum Poker - Planning Poker Online</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üÉè Scrum Poker</h1>
            <p class="subtitle">Planning Poker Online</p>
            <p style="margin-top: 10px;">
                <a href="debug.html" style="color: #666; font-size: 0.9rem; text-decoration: none;">
                    üîç P√°gina de Diagn√≥stico
                </a>
            </p>
        </header>

        <!-- Home Screen -->
        <div id="homeScreen" class="screen active">
            <!-- Create Room Section -->
            <div class="card">
                <h2>Criar Sala</h2>
                <div class="form-group">
                    <label for="username">Nome de usu√°rio</label>
                    <input type="text" id="username" placeholder="Digite seu nome">
                </div>
                
                <div class="form-group">
                    <label for="cardSet">Conjunto de cartas</label>
                    <select id="cardSet">
                        <option value="fibonacci">Fibonacci: 0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89</option>
                        <option value="sequential">Sequencial: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10</option>
                        <option value="days">Dias: ¬Ω, 1, 1¬Ω, 2, 2¬Ω, 3, 3¬Ω, 4, 4¬Ω, 5... at√© 10¬Ω</option>
                        <option value="tshirt">Tamanhos: XS, S, M, L, XL, XXL</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>

                <div class="form-group" id="customCardsGroup" style="display: none;">
                    <label for="customCards">Cartas personalizadas (separadas por v√≠rgula)</label>
                    <input type="text" id="customCards" placeholder="1, 2, 3, 5, 8, 13, 21">
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="everyoneAdmin">
                        Todos os usu√°rios s√£o administradores
                    </label>
                </div>

                <button id="createRoomBtn" class="btn btn-primary">CRIAR SALA</button>
            </div>

            <!-- Join Room Section -->
            <div class="card">
                <h2>Entrar em uma Sala</h2>
                <div class="form-group">
                    <label for="joinUsername">Nome de usu√°rio</label>
                    <input type="text" id="joinUsername" placeholder="Digite seu nome">
                </div>
                
                <div class="form-group">
                    <label for="roomId">Nome da sala</label>
                    <input type="text" id="roomId" placeholder="Digite o nome da sala">
                </div>

                <button id="joinRoomBtn" class="btn btn-secondary">ENTRAR NA SALA</button>
            </div>
        </div>

        <!-- Room Screen -->
        <div id="roomScreen" class="screen">
            <div class="room-header">
                <div class="room-info">
                    <h2 id="roomName">Sala: </h2>
                    <p id="roomParticipants">Participantes: <span id="participantCount">0</span></p>
                    <p style="margin-top: 10px;">
                        <strong>C√≥digo da sala:</strong> 
                        <span id="roomCode" style="font-size: 1.3rem; color: #2196F3; font-weight: bold; letter-spacing: 2px;">------</span>
                        <button id="copyCodeBtn" style="margin-left: 10px; padding: 5px 10px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 4px;">
                            üìã Copiar C√≥digo
                        </button>
                    </p>
                    <p style="margin-top: 5px;">
                        <button id="copyLinkBtn" style="padding: 5px 10px; cursor: pointer; background: #2196F3; color: white; border: none; border-radius: 4px;">
                            üîó Copiar Link da Sala
                        </button>
                    </p>
                </div>
                <button id="leaveRoomBtn" class="btn btn-danger">SAIR DA SALA</button>
            </div>

            <!-- Story/Task Input -->
            <div class="story-section" id="adminControls">
                <div class="form-group">
                    <label for="storyName">Hist√≥ria/Tarefa atual</label>
                    <input type="text" id="storyName" placeholder="Digite o nome da hist√≥ria ou tarefa">
                </div>
                <div class="button-group">
                    <button id="revealBtn" class="btn btn-primary">REVELAR CARTAS</button>
                    <button id="resetBtn" class="btn btn-secondary">NOVA RODADA</button>
                </div>
            </div>

            <!-- Current Story Display -->
            <div id="currentStory" class="current-story">
                <h3>Votando: <span id="currentStoryName">-</span></h3>
            </div>

            <!-- Participants Grid -->
            <div id="participantsGrid" class="participants-grid">
                <!-- Participants will be added dynamically -->
            </div>

            <!-- Voting Stats -->
            <div id="votingStats" class="voting-stats" style="display: none;">
                <h3>Resultados</h3>
                <div id="statsContent"></div>
            </div>

            <!-- Card Selection -->
            <div class="card-selection">
                <h3>Selecione sua carta:</h3>
                <div id="cardOptions" class="card-options">
                    <!-- Cards will be added dynamically -->
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>¬© 2025 Scrum Poker - Planning Poker Online</p>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Environment Variables (opcional - para desenvolvimento local) -->
    <script>
        // Tenta carregar env.js se existir, sen√£o continua sem erro
        (function() {
            var script = document.createElement('script');
            script.src = 'env.js';
            script.onerror = function() {
                console.log('‚ÑπÔ∏è env.js n√£o encontrado - usando configura√ß√£o padr√£o do app.js');
            };
            document.head.appendChild(script);
        })();
    </script>
    
    <!-- Application -->
    <script src="app.js"></script>
</body>
</html>
